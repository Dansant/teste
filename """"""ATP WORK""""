using System;
using System.IO;
namespace ATPWORK
{
    class Program
    {
        public struct Funcionarios
        {
            public int matricula;
            public string nome;
            public string cpf;
            public double salario;
            public Funcionarios(int m, string n, string c, double s)
            {
                matricula = m;
                nome = n;
                cpf = c;
                salario = s;
            }
        }
        static void Inserir(Funcionarios[] func)
        {
            string namefile = @"C:\Users\danie\OneDrive\Área de Trabalho\Funcionários" + ".txt";
            StreamWriter gravador = new StreamWriter(namefile, true);
            for (int j = 0; j < func.Length; j++)
            {
                gravador.WriteLine(func[j].matricula + "; " + func[j].nome + "; " + func[j].cpf + "; " + func[j].salario + " Reais.");
                gravador.WriteLine("_______________________________________________________________________________________________________________________________");

            }
            gravador.Close();
        }
        static void Listar(Funcionarios[] func)
        {
            string text = System.IO.File.ReadAllText(@"C:\Users\danie\OneDrive\Área de Trabalho\Funcionários.txt");
            System.Console.WriteLine(text);
        }
        static bool Pesquisar(int mat)
        {
            bool flag;
            StreamReader reader = new StreamReader(@"C:\Users\danie\OneDrive\Área de Trabalho\Funcionários.txt");
            string line;
            while ((line = reader.ReadLine()) != null)
            {
                Console.WriteLine(line);
                return true;
            }
            reader.Close();
            return false;
        }
        static void Main(string[] args)
        {
            int mat;
            int count;
            int m;
            string n;
            string c;
            double s;
            Console.WriteLine("Insira a quantidade de matrículas que você deseja cadastrar:");
            count = int.Parse(Console.ReadLine());
            int[] matriculass = new int[count];
            while (count < 0)
            {
                Console.WriteLine("NÚMERO INVALIDO\tInsira a quantidade de matrículas que você deseja cadastrar:");
                count = int.Parse(Console.ReadLine());
            }
            Funcionarios[] func = new Funcionarios[count];
            for (int i = 0; i < count; i++)
            {
                Console.WriteLine("Insira o número da sua matrícula:");
                m = int.Parse(Console.ReadLine());
                while (m < 0)
                {
                    Console.WriteLine("NÚMERO INVALIDO\tInsira o número da sua matrícula:");
                    m = int.Parse(Console.ReadLine());
                }
                matriculass[i] = m;
                Console.WriteLine("Insira seu nome:");
                n = Console.ReadLine();
                Console.WriteLine("Insira o número do seu CPF:");
                c = Console.ReadLine();
                Console.WriteLine("Insira o valor do seu salário:");
                s = double.Parse(Console.ReadLine());
                while (s < 0)
                {
                    Console.WriteLine("NÚMERO INVALIDO\tInsira o valor do seu salário:");
                    s = double.Parse(Console.ReadLine());
                }
                func[i] = new Funcionarios(m, n, c, s);
            }
            Inserir(func);
            Console.WriteLine("\nDados do arquivo:");
            Listar(func);
            Console.WriteLine("Insira a matrícula que você deseja pesquisar a existência:");
            mat = int.Parse(Console.ReadLine());
            Pesquisar(mat, func);
            Console.WriteLine("Processo finalizado.");
            Console.ReadKey();
        }
    }
}
